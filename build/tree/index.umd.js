(function(d,i){typeof exports=="object"&&typeof module!="undefined"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(d=typeof globalThis!="undefined"?globalThis:d||self,i(d.index={},d.Vue))})(this,function(d,i){"use strict";const x={data:{type:Object,required:!0}};function u(r,t=0,e=[]){return t++,r.reduce((a,f)=>{var l;const o={...f};if(o.level=t,e.length>0&&e[e.length-1].level>=t)for(;((l=e[e.length-1])==null?void 0:l.level)>=t;)e.pop();e.push(o);const n=e[e.length-2];if(n&&(o.parentId=n.id),o.children){const s=u(o.children,t,e);return delete o.children,a.concat(o,s)}else return o.isLeaf=!0,a.concat(o)},[])}var y=(()=>`.s-tree-node{text-align:left}
`)(),g=i.defineComponent({name:"STree",props:x,setup(r){const{data:t}=i.toRefs(r),e=i.reactive(u(t.value)),a=n=>{const l=e.find(s=>s.id===n.id);l&&(l.expanded=!l.expanded)},f=n=>{let l=[];const s=e.findIndex(c=>c.id===n.id);for(let c=s+1;c<e.length&&n.level<e[c].level;c++)l.push(e[c]);return l},o=i.computed(()=>{let n=[];const l=[];for(const s of e)n.map(c=>c.id).includes(s.id)||(s.expanded!==!0&&(n=f(s),console.log(n)),l.push(s));return console.log("result:",l),l});return()=>i.createVNode("div",{class:"s-tree"},[o.value.map(n=>i.createVNode("div",{class:"s-tree-node",style:{paddingLeft:`${24*(n.level-1)}px`}},[n.isLeaf?i.createVNode("span",{style:{display:"inline-block",width:"25px"}},null):i.createVNode("svg",{style:{width:"25px",height:"16px",display:"inline-block",transform:n.expanded?"rotate(90deg)":""},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>a(n)},[i.createVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null)]),n.label]))])}});const h="s",p="_sniper",m=(r,t={classPrefix:h})=>{var e;r.config.globalProperties[p]={...(e=r.config.globalProperties[p])!=null?e:{},classPrefix:t.classPrefix}};function b(r,t,e){console.log(t.name),r.component(t.name)||(m(r,e),r.component(t.name,t))}var v={install(r,t){b(r,g,t)}};d.Tree=g,d.default=v,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
